developer installation for windows
==================================

This file is supposed to guide you step by step to have working (compiling) version of Powiter on windows. Right now, only a Visual studio 2010 solution file is proposed.

##Note

If you're not a Visual studio user, maybe in the future the QtCreator project file will get updated so it works on all platforms. For now you'd have to stick to Visual studio on windows, or make you're own project files.

If you're planning on writing a CMAKE based project file, and that you succeed in making it portable(windows/linux/osx), please send a mail at immarespond at gmail dot com.

##Install libraries

In order to have Powiter compiling, first you need to install the required libraries.

###Qt 4.8.5

You'll need to install Qt libraries from [Qt download](http://qt-project.org/downloads). 


###OpenEXR

Download OpenEXR from http://www.openexr.com/downloads.html and install it.
2.0 features are not supported for now and a pre 2.0 version is enough to make it work.

If you're having troubles to compile OpenEXR , here's some documentation: 

http://hebbut.net/Public.Offerings/OpenEXR.html

http://michael-stengel.com/blog/?p=51

http://www.fixstars.com/en/lucille/docs/dev/index.php/How_to_build_OpenEXR_libs_for_Win_64bit

###freetype2


Compile it by yourself from (Freetype download)[http://download.savannah.gnu.org/releases/freetype/] (make sure to download freetype 2.x). It should be pretty much straight forward. Powiter does a static link with freetype, make sure to build it as a static library.

###ftgl

Download it and compile it yourself from (FTGL download)[http://sourceforge.net/projects/ftgl/]. It should be pretty much straight forward. You can build it as a dll.
###boost

You can download boost from 
(boost download)[http://www.boost.org/users/download/]
For now only boost serialisation is required.

###glew
On windows,OpenGL API is not up to date to the features we need. You'll need to download glew, that provides a recent version of the OpenGL API:

(glew download)[http://glew.sourceforge.net/]


### OpenFX

In the Powiter_Core directory, open a terminal and type
	git submodule update -i
This will properly fetch from github a fork of OpenFX into Powiter_Core/libs/OpenFX.

###Expat

You need to build expat in order to make OpenFX work. The expat sources are located under the HostSupport folder within OpenFX.
You should find a .vcxproj file under
\libs\OpenFX\HostSupport\expat-2.0.1\lib
Open it with visual studio and build a static release version of expat.

We're done here for libraries.

###Add the config.pri file

You have to define the locations of the required libraries. This is done by creating a .pri file that will tell the .pro where to find those libraries.

- create the config.pri file next to the Powiter.pro file.

You can fill it with the following proposed code to point to the libraries. Of course you need to provide valid paths that are valid on your system. Note that for Qt you just need to specify where the include files are.
For Eigen some issues might arise if it is already included in the system search path. Generally I left the eigen{} field blank in the config.pro to work around it.

INCLUDEPATH is the path to the include files

LIBS is the path to the libs

openexr{
    INCLUDEPATH += $$quote(C:\\OpenExr_win32\\OpenEXR)
    LIBS += -L$$quote(C:\\OpenExr_win32\\lib\\Debug) -lIlmimf -lIex -lImath -lHalf -lIlmThread
}

ftgl{
    INCLUDEPATH +=  $$quote(C:\\ftgl_win32\\include)
    LIBS += -L$$quote(C:\\ftgl_win32\\lib) -lftgl
}

freetype2{
    INCLUDEPATH += $$quote(C:\\freetype2_win32\\include)
    LIBS += -L$$quote(C:\\freetype2_win32\\lib) -lfreetype242MT
}

boost{
    INCLUDEPATH +=  $$quote(C:\\boost1.54)
    LIBS += -L$$quote(C:\\boost1.54\\lib) -lboost_serialization-mt
}

glew{
    INCLUDEPATH +=  $$quote(C:\\glew\\include)
    LIBS += -L$$quote(C:\\glew\\lib\\Release) -lglew32
}

expat{
    INCLUDEPATH += $$PWD/libs/OpenFX/HostSupport/expat-2.0.1/lib
    LIBS += -L$$quote(C:\\Users\\Lex\\Desktop\\Powiter\\Powiter_Core\\libs\\OpenFX\\HostSupport\\expat-2.0.1\\win32\\bin\\Release) -llibexpatMT
   # LIBS += shell32.lib
}

###Copy the dll's over

Copy all the required dll's to the executable directory.
If Powiter launches that means you got it all right;)

### Build:

The <srcPath> must be absolute and <buildPath> must not be a subdir of <srcPath>


mkdir <buildPath>
cd <buildfolder>
qmake <srcPath>/Powiter.pro
make

If you want to build in DEBUG mode change the qmake call to this line:

qmake CONFIG+=debug <srcPath>/Powiter.pro

You'll need to edit the file /etc/launchd.conf and add this line

setenv PATH /opt/local/bin:/usr/bin:/bin:/usr/sbin:/sbin

And restart your computer so it takes it into account.



###(Optional) Build on Visual Studio:

You need to install the Qt add-in for visual studio. Open the Qt menu within visual studio and select "open a .pro file". This will generate a proper .sln working with qt command line tools.

